import{d as u2,t as w,a as x,s as k}from"../chunks/cdZpXTRU.js";import{X as $,_ as t2,a1 as l,j as t,a0 as i,Z,T as P,$ as r,a2 as W,aE as h2,a3 as m,ar as P2}from"../chunks/CpheGI1x.js";import{e as L2,i as I2}from"../chunks/B8U8OScr.js";import{b as w2,s as d2,t as q,f as Y,c as y2,d as V,a as O,p as A2,r as H2,e as F2,A as x2,g as N2}from"../chunks/DmQUckAG.js";import"../chunks/Cw3-Dsd9.js";import{a as B2,i as c2,p as K}from"../chunks/lS090TL_.js";import{k as V2}from"../chunks/CLlfmT2c.js";import{b as k2}from"../chunks/CTyi8ruM.js";import{c as j2}from"../chunks/Ej25J0qn.js";var R2=w("<button> </button>"),S2=w('<div class="catmenu svelte-jvj0dt"></div>');function E2(p,e){$(e,!0);var a=S2();L2(a,21,()=>e.cats,I2,(u,v)=>{var s=R2();s.__click=()=>w2.cat=t(v).id;var o=i(s,!0);l(s),Z(()=>{d2(s,1,w2.cat===t(v).id?"selected":"","svelte-jvj0dt"),k(o,t(v).name)}),x(u,s)}),l(a),x(p,a),t2()}u2(["click"]);function T2(p,e,a){if(t(e)){const u=V.find(v=>v.id==a().id);u.quantity++}else a().quantity=1,V.push(a())}var O2=w('<img draggable="false" class="svelte-1cutuai">'),U2=w('<p class="svelte-1cutuai"> </p>'),K2=w('<p class="svelte-1cutuai"> </p>'),Q2=w('<div class="quantity svelte-1cutuai"><!></div>'),z2=w('<li class="product svelte-1cutuai"><button class="svelte-1cutuai"><!></button> <!> <p class="svelte-1cutuai"> </p></li>');function J2(p,e){$(e,!0);let a=B2(e,"product",7),u=P(()=>V.some(_=>_.id===a().id)),v=P(()=>{const _=V.find(f=>f.id===a().id);return _?_.quantity:0});var s=z2(),o=i(s);o.__click=[T2,u,a];var g=i(o);{var c=_=>{var f=O2();Z(()=>{O(f,"src",`/img/products/${a().image}`),O(f,"alt",a().name)}),x(_,f)},n=_=>{var f=U2(),B=i(f,!0);l(f),Z(()=>k(B,a().name)),x(_,f)};c2(g,_=>{a().image?_(c):_(n,!1)})}l(o);var I=r(o,2);{var A=_=>{var f=Q2(),B=i(f);V2(B,()=>t(v),j=>{var M=K2(),R=i(M,!0);l(M),Z(()=>k(R,t(v))),q(1,M,()=>Y,()=>({y:15})),x(j,M)}),l(f),q(3,f,()=>Y,()=>({y:15,duration:200})),x(_,f)};c2(I,_=>{t(v)&&_(A)})}var L=r(I,2),N=i(L,!0);l(L),l(s),Z(()=>k(N,a().name)),q(1,s,()=>Y,()=>({y:20,duration:200})),q(2,s,()=>y2,()=>({duration:200})),x(p,s),t2()}u2(["click"]);var X2=w('<ul class="display svelte-1i7bwhu"></ul>');function G2(p,e){var a=X2();L2(a,21,()=>e.filteredProducts,I2,(u,v)=>{J2(u,{get product(){return t(v)}})}),l(a),x(p,a)}async function q2(p,e,a,u,v,s,o){if(!Array.isArray(p))throw new Error("Invalid cart: must be an array");if(isNaN(e)||isNaN(a)||isNaN(u)||isNaN(v))throw new Error("All monetary values must be valid numbers");const g={cash:parseFloat(a),card:parseFloat(u),cashReceived:parseFloat(o),change:parseFloat(s),discountRate:parseFloat(v),frontendTotal:parseFloat(e),products:p.map(c=>({product_id:c.id,quantity:c.quantity}))};try{const c=await fetch("/api/ticket",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)});if(!c.ok)throw new Error(`API request failed with status ${c.status}`);const n=await c.json(),I=n.ticket,A=n.ticketDetails,L={ticket:I,details:n.ticketDetails,printerIP:A2.ip};return await window.api.printTicket(L),await window.api.printKitchen(L),n}catch(c){throw console.error("Error: sale commit",c),c}}const W2="data:image/svg+xml,%3csvg%20width='84'%20height='63'%20viewBox='0%200%2084%2063'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M24.358%200.113281H55.4925C57.0264%200.11689%2058.2678%201.36191%2058.2714%202.89193V8.44924C58.2678%209.98296%2057.0263%2011.2243%2055.4925%2011.2279H24.358C17.3457%2011.2892%2011.694%2016.9873%2011.694%2023.9987C11.694%2031.0067%2017.3457%2036.7086%2024.358%2036.7659H64.2049L59.4483%2032.0097L59.4519%2032.0133C57.2902%2029.8372%2057.2902%2026.3261%2059.4519%2024.1537C61.6246%2021.9921%2065.136%2021.9921%2067.3087%2024.1537L82.7803%2039.6202C84.1878%2041.0347%2084.1878%2043.319%2082.7803%2044.73L67.013%2060.4921C64.8404%2062.6537%2061.3289%2062.6537%2059.1563%2060.4921C56.9945%2058.3161%2056.9945%2054.8049%2059.1563%2052.6325L63.9129%2047.8763H24.3588C15.9138%2047.75%208.16186%2043.1706%203.97566%2035.8344C-0.210536%2028.4982%20-0.210721%2019.4976%203.97566%2012.1616C8.16205%204.82558%2015.9143%200.246225%2024.3588%200.115967L24.358%200.113281Z'%20fill='%23191D22'/%3e%3c/svg%3e",Y2="data:image/svg+xml,%3csvg%20width='30'%20height='30'%20viewBox='0%200%2030%2030'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M24%203.002C21.492%201.117%2018.375%200%2015%200C6.721%200%200%206.721%200%2015C0%2023.279%206.721%2030%2015%2030C22.891%2030%2029.366%2023.893%2029.956%2016.152C30.04%2015.051%2029.215%2014.09%2028.114%2014.006C27.013%2013.922%2026.052%2014.747%2025.968%2015.848C25.535%2021.524%2020.786%2026%2015%2026C8.929%2026%204%2021.071%204%2015C4%208.929%208.929%204%2015%204C17.352%204%2019.533%204.74%2021.322%206H20C18.896%206%2018%206.896%2018%208C18%209.104%2018.896%2010%2020%2010H26C27.105%2010%2028%209.105%2028%208V2C28%200.896%2027.104%200%2026%200C24.896%200%2024%200.896%2024%202V3.002Z'%20fill='%23191D22'/%3e%3c/svg%3e",$2="data:image/svg+xml,%3csvg%20width='52'%20height='34'%20viewBox='0%200%2052%2034'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M3.50967%200H48.0908C50.0219%200%2051.6005%201.57706%2051.6005%203.50967V30.4903C51.6005%2032.4214%2050.0219%2034%2048.0908%2034H3.50967C1.57864%2034%200%2032.4214%200%2030.4903V3.50967C0%201.57864%201.57864%200%203.50967%200ZM41.0225%2024.7415C41.6988%2024.7415%2042.3167%2024.9896%2042.7892%2025.4004C43.2633%2024.9912%2043.8811%2024.7415%2044.5559%2024.7415C46.0476%2024.7415%2047.258%2025.9519%2047.258%2027.4437C47.258%2028.9354%2046.0476%2030.1458%2044.5559%2030.1458C43.8811%2030.1458%2043.2633%2029.8978%2042.7892%2029.4885C42.3167%2029.8978%2041.6988%2030.1458%2041.0225%2030.1458C39.5308%2030.1458%2038.3203%2028.9354%2038.3203%2027.4437C38.3203%2025.9519%2039.5308%2024.7415%2041.0225%2024.7415ZM6.13757%2029.4585C4.73434%2029.4585%204.73434%2027.3252%206.13757%2027.3252H31.7055C33.1088%2027.3252%2033.1088%2029.4585%2031.7055%2029.4585H6.13757ZM10.3252%2016.5054L8.64538%2020.1841H12.1456L13.8253%2016.5054H10.3252ZM6.30982%2020.1841L7.98959%2016.5054H5.9353C5.73146%2016.5054%205.56079%2016.6761%205.56079%2016.8799V19.808C5.56079%2020.0119%205.73146%2020.1826%205.9353%2020.1826H6.30982V20.1841ZM33.6682%2016.5054L31.9884%2020.1841H34.0443C34.2481%2020.1841%2034.4188%2020.0119%2034.4188%2019.8096V16.8815C34.4188%2016.6776%2034.2481%2016.507%2034.0443%2016.507H33.6682V16.5054ZM29.6528%2020.1841L31.3326%2016.5054H27.8324L26.1526%2020.1841H29.6528ZM23.8171%2020.1841L25.4968%2016.5054H21.9967L20.3169%2020.1841H23.8171ZM17.9813%2020.1841L19.6611%2016.5054H16.1609L14.4811%2020.1841H17.9813ZM5.9353%2014.3721H34.0443C35.4254%2014.3721%2036.5536%2015.4988%2036.5536%2016.8815V19.8096C36.5536%2021.1923%2035.4269%2022.319%2034.0443%2022.319H5.9353C4.55261%2022.319%203.42592%2021.1923%203.42592%2019.8096V16.8815C3.42592%2015.4988%204.55261%2014.3721%205.9353%2014.3721ZM2.1333%204.97769H49.4656V3.51125C49.4656%202.75748%2048.8446%202.13646%2048.0908%202.13646H3.50967C2.7559%202.13646%202.13488%202.75906%202.13488%203.51125V4.97769H2.1333ZM49.4656%2012.4806H2.1333V30.4919C2.1333%2031.2457%202.75432%2031.8667%203.50809%2031.8667H48.0892C48.843%2031.8667%2049.464%2031.2457%2049.464%2030.4919V12.4806H49.4656Z'%20fill='%23191D22'/%3e%3c/svg%3e",t0="data:image/svg+xml,%3csvg%20width='61'%20height='35'%20viewBox='0%200%2061%2035'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M56.2159%200H4.78412C2.14689%200%200%201.86533%200%204.1567V30.136C0%2032.4274%202.14689%2034.2927%204.78412%2034.2927H56.2159C58.8531%2034.2927%2061%2032.4274%2061%2030.136V4.1567C61%201.86533%2058.8531%200%2056.2159%200ZM58.6079%2030.1382C58.6079%2031.285%2057.5357%2032.2166%2056.2159%2032.2166H4.78412C3.4643%2032.2166%202.39209%2031.285%202.39209%2030.1382V4.15675C2.39209%203.01002%203.4643%202.07843%204.78412%202.07843H56.2159C57.5357%202.07843%2058.6079%203.01002%2058.6079%204.15675V30.1382Z'%20fill='%23191D22'/%3e%3cpath%20d='M55.0205%204.15625H5.98117C5.31999%204.15625%204.78516%204.62097%204.78516%205.19541V29.0966C4.78516%2029.6711%205.32003%2030.1358%205.98117%2030.1358H55.0205C55.6817%2030.1358%2056.2165%2029.671%2056.2165%2029.0966V5.19541C56.2165%204.62309%2055.6817%204.15625%2055.0205%204.15625ZM22.3984%2028.0591H13.0582C12.5531%2025.4515%2010.1808%2023.3903%207.17966%2022.9515L7.17718%2011.3421C10.1784%2010.9032%2012.5507%208.84203%2013.0558%206.23446H22.3959C18.2804%208.5516%2015.549%2012.5773%2015.549%2017.1466C15.549%2021.7158%2018.2802%2025.742%2022.3984%2028.0591ZM29.4013%2015.7117C29.696%2015.9677%2030.0847%2016.1075%2030.5008%2016.1075C32.6898%2016.1075%2034.4479%2017.648%2034.4479%2019.537C34.4479%2021.0667%2033.2915%2022.3641%2031.6969%2022.8052V24.3177C31.6969%2024.8921%2031.162%2025.3568%2030.5008%2025.3568C29.8397%2025.3568%2029.3048%2024.8921%2029.3048%2024.3177V22.9665H27.7498C27.0886%2022.9665%2026.5537%2022.5018%2026.5537%2021.9274C26.5537%2021.3529%2027.0886%2020.8882%2027.7498%2020.8882H30.5008C31.3576%2020.8882%2032.0559%2020.2815%2032.0559%2019.5371C32.0559%2018.7992%2031.37%2018.186%2030.5008%2018.186C28.3217%2018.186%2026.5537%2016.6519%2026.5537%2014.7565C26.5537%2013.2289%2027.7051%2011.9273%2029.3048%2011.4862V9.97584C29.3048%209.40138%2029.8396%208.93668%2030.5008%208.93668C31.1619%208.93668%2031.6968%209.4014%2031.6968%209.97584V11.327H33.2519C33.913%2011.327%2034.4479%2011.7917%2034.4479%2012.3661C34.4479%2012.9406%2033.913%2013.4053%2033.2519%2013.4053H30.5008C30.0848%2013.4053%2029.696%2013.5451%2029.4013%2013.8012C28.7946%2014.3283%2028.7922%2015.1824%2029.4013%2015.7117ZM53.8243%2022.9517C50.8231%2023.3906%2048.4508%2025.4517%2047.9457%2028.0593H38.6056C42.7211%2025.7422%2045.4525%2021.7165%2045.4525%2017.1472C45.4525%2012.5779%2042.7212%208.55226%2038.6056%206.23512H47.9457C48.4509%208.84275%2050.8231%2010.9039%2053.8243%2011.3427V22.9517Z'%20fill='%23191D22'/%3e%3c/svg%3e",e0=""+new URL("../assets/bill-50.BK3OUxnx.jpg",import.meta.url).href,a0=""+new URL("../assets/bill-100.D4LR0M-N.jpg",import.meta.url).href,l0=""+new URL("../assets/bill-200.Uz-hHio7.jpg",import.meta.url).href,i0=""+new URL("../assets/bill-500.QBRF3xjg.jpg",import.meta.url).href;function r0(p,e,a){m(e,0),m(a,0)}var s0=(p,e,a)=>e(a()),v0=w('<button class="svelte-rpxvbl"> </button>'),n0=(p,e,a)=>e(a()),o0=w('<button class="bill svelte-rpxvbl"><img class="svelte-rpxvbl"></button>'),c0=(p,e,a)=>{e(p,t(a))},d0=(p,e,a)=>{e(p,t(a))},u0=w('<div class="cash svelte-rpxvbl"><div class="cash--header svelte-rpxvbl"><div class="row svelte-rpxvbl"><div class="field svelte-rpxvbl"><p class="label svelte-rpxvbl">tarjeta</p> <input type="number" name="tarjeta" class="svelte-rpxvbl"></div> <div class="field svelte-rpxvbl"><p class="label svelte-rpxvbl">efectivo</p> <input type="number" name="efectivo" class="svelte-rpxvbl"></div></div> <div class="row svelte-rpxvbl"><p class="label svelte-rpxvbl">total</p> <p class="amount svelte-rpxvbl"> </p></div> <div class="row svelte-rpxvbl"><p class="label svelte-rpxvbl">pendiente</p> <p> </p></div> <div class="row svelte-rpxvbl"><p class="label svelte-rpxvbl">cambio</p> <p> </p></div></div> <div class="cash--body svelte-rpxvbl"><div class="bills svelte-rpxvbl"><!> <!> <!> <!></div> <div class="numpad svelte-rpxvbl"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <button class="double svelte-rpxvbl">borrar</button></div></div> <div class="cash--footer svelte-rpxvbl"><button class="confirmBtn svelte-rpxvbl"><img alt="confirmar" class="svelte-rpxvbl"></button></div></div>');function p0(p,e){$(e,!0);const a=(h,F=h2)=>{var H=v0();H.__click=[s0,I,F];var T=i(H,!0);l(H),Z(()=>k(T,F())),x(h,H)},u=(h,F=h2,H=h2)=>{var T=o0();T.__click=[n0,N,F];var Z2=i(T);l(T),Z(()=>{T.disabled=F()<e.total,O(Z2,"src",H()),O(Z2,"alt",`billete de ${F()??""}`)}),x(h,T)};let v=B2(e,"ready",15),s=W(0),o=W(0),g=P(()=>t(s)+t(o)),c=P(()=>e.total>t(g)?e.total-t(g):0),n=P(()=>t(g)-e.total<0?0:t(g)-e.total);function I(h){m(s,K(t(s).toString())),m(s,t(s)+h),m(s,K(parseFloat(t(s))))}function A(h,F){const H=Number(F);h.target.value=H}async function L(){if(!(t(g)<e.total)){let h=t(s),F=t(o),H=0;if(t(s)>0&&t(g)>=e.total)H=t(n),t(o)>0&&(F=e.total-(t(s)-H));else if(t(s)>0&&t(g)<e.total)throw new Error("Insufficient payment");if((await q2(V,e.total,h-H,F,e.discountRate,H,h)).status==200)v(!1),V.length=0,e.reset();else throw new Error("failed to commit sale")}}function N(h){m(s,K(h)),L()}var _=u0(),f=i(_),B=i(f),j=i(B),M=r(i(j),2);H2(M),M.__input=[c0,A,o],l(j);var R=r(j,2),C=r(i(R),2);H2(C),C.__input=[d0,A,s],l(R),l(B);var d=r(B,2),y=r(i(d),2),e2=i(y,!0);l(y),l(d);var S=r(d,2),a2=r(i(S),2),E=i(a2,!0);l(a2),l(S);var l2=r(S,2),Q=r(i(l2),2),b2=i(Q,!0);l(Q),l(l2),l(f);var U=r(f,2),z=i(U),p2=i(z);u(p2,()=>50,()=>e0);var i2=r(p2,2);u(i2,()=>100,()=>a0);var r2=r(i2,2);u(r2,()=>200,()=>l0);var f2=r(r2,2);u(f2,()=>500,()=>i0),l(z);var m2=r(z,2),b=i(m2);a(b,()=>"7");var D=r(b,2);a(D,()=>"8");var J=r(D,2);a(J,()=>"9");var s2=r(J,2);a(s2,()=>"4");var _2=r(s2,2);a(_2,()=>"5");var v2=r(_2,2);a(v2,()=>"6");var X=r(v2,2);a(X,()=>"1");var G=r(X,2);a(G,()=>"2");var n2=r(G,2);a(n2,()=>"3");var g2=r(n2,2);a(g2,()=>"0");var o2=r(g2,2);o2.__click=[r0,s,o],l(m2),l(U);var M2=r(U,2),C2=i(M2);C2.__click=L;var D2=i(C2);O(D2,"src",j2),l(C2),l(M2),l(_),Z((h,F,H)=>{k(e2,h),d2(a2,1,`amount ${(t(c)>0?"accent":"")??""}`,"svelte-rpxvbl"),k(E,F),d2(Q,1,`amount change ${(t(n)>0?"accent":"")??""}`,"svelte-rpxvbl"),k(b2,H),C2.disabled=t(c)>0},[()=>e.total%1!==0?e.total.toFixed(2):e.total,()=>t(c)%1!==0?t(c).toFixed(2):t(c),()=>t(n)%1!==0?t(n).toFixed(2):t(n)]),k2(M,()=>t(o),h=>m(o,h)),k2(C,()=>t(s),h=>m(s,h)),q(3,_,()=>Y,()=>({y:50,duration:300})),x(p,_),t2()}u2(["click","input"]);const f0="data:image/svg+xml,%3csvg%20width='15'%20height='16'%20viewBox='0%200%2015%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_1321_1209)'%3e%3cpath%20d='M13.649%206.38493H9.27047V1.97908C9.27047%201.43844%208.83475%201%208.29747%201H7.32448C6.7872%201%206.35148%201.43844%206.35148%201.97908V6.38493H1.973C1.43572%206.38493%201%206.82337%201%207.364V8.34308C1%208.88372%201.43572%209.32216%201.973%209.32216H6.35148V13.728C6.35148%2014.2686%206.7872%2014.7071%207.32448%2014.7071H8.29747C8.83475%2014.7071%209.27047%2014.2686%209.27047%2013.728V9.32216H13.649C14.1862%209.32216%2014.622%208.88372%2014.622%208.34308V7.364C14.622%206.82337%2014.1862%206.38493%2013.649%206.38493Z'%20fill='%2334383e'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_1321_1209'%3e%3crect%20width='13.622'%20height='15.6652'%20fill='white'%20transform='translate(0.8125%200.125)'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",m0="data:image/svg+xml,%3csvg%20width='96'%20height='96'%20viewBox='0%200%2096%2096'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M92.7475%202.8275C96.5175%206.6075%2096.5175%2012.7775%2092.7475%2016.5475L61.5075%2047.7875L92.7475%2079.0275C96.5175%2082.7975%2096.5175%2088.9675%2092.7475%2092.7475C88.9675%2096.5175%2082.7975%2096.5175%2079.0275%2092.7475L47.7875%2061.5075L16.5475%2092.7475C12.7775%2096.5175%206.6075%2096.5175%202.8275%2092.7475C-0.9425%2088.9675%20-0.9425%2082.7975%202.8275%2079.0275L34.0675%2047.7875L2.8275%2016.5475C-0.9425%2012.7775%20-0.9425%206.6075%202.8275%202.8275C6.6075%20-0.9425%2012.7775%20-0.9425%2016.5475%202.8275L47.7875%2034.0675L79.0275%202.8275C82.7975%20-0.9425%2088.9675%20-0.9425%2092.7475%202.8275Z'%20fill='%23191D22'/%3e%3c/svg%3e";var _0=(p,e,a)=>e(a.item),g0=w('<p class="qty svelte-7olwyn"> </p>'),C0=w("<p> </p>"),b0=(p,e,a)=>e(a.item),h0=w('<li class="item svelte-7olwyn"><div class="field svelte-7olwyn"><button class="circle"><img alt="más" draggable="false"></button> <!></div> <div class="field svelte-7olwyn"><p class="lineitem"> </p></div> <div class="field currency svelte-7olwyn"><p> </p></div> <div class="field currency svelte-7olwyn"><!></div> <div class="field svelte-7olwyn"><button class="circle"><img alt="eliminar"></button></div></li>');function x0(p,e){$(e,!0);function a(C){const d=V.find(y=>y.id===C.id);d.quantity++}function u(C){const d=V.findIndex(y=>y.id===C.id);d!==-1&&V.splice(d,1)}var v=h0(),s=i(v),o=i(s);o.__click=[_0,a,e];var g=i(o);O(g,"src",f0),l(o);var c=r(o,2);V2(c,()=>e.item.quantity,C=>{var d=g0(),y=i(d,!0);l(d),Z(()=>k(y,e.item.quantity)),q(1,d,()=>Y,()=>({y:15})),x(C,d)}),l(s);var n=r(s,2),I=i(n),A=i(I,!0);l(I),l(n);var L=r(n,2),N=i(L),_=i(N,!0);l(N),l(L);var f=r(L,2),B=i(f);V2(B,()=>e.item.quantity,C=>{var d=C0(),y=i(d,!0);l(d),Z(()=>k(y,e.item.price*e.item.quantity)),q(1,d,()=>Y,()=>({y:15})),x(C,d)}),l(f);var j=r(f,2),M=i(j);M.__click=[b0,u,e];var R=i(M);O(R,"src",m0),l(M),l(j),l(v),Z(()=>{k(A,e.item.name),k(_,e.item.price)}),q(3,v,()=>F2),x(p,v),t2()}u2(["click"]);var w0=w('<div class="discount svelte-1fanv0g"><div class="discount--row svelte-1fanv0g"><p class="discount--label svelte-1fanv0g">subtotal</p> <p class="discount--amount svelte-1fanv0g"> </p></div> <div class="discount--row svelte-1fanv0g"><p class="discount--label svelte-1fanv0g">descuento</p> <div class="discount--input svelte-1fanv0g"><input type="number" min="0" max="100" class="svelte-1fanv0g"> <p class="discount--input__sign svelte-1fanv0g">%</p></div> <p class="discount--amount svelte-1fanv0g"> </p></div></div>'),y0=w('<div class="container svelte-1fanv0g"><!> <button class="circle reset svelte-1fanv0g"><img alt="Borrar"></button> <ul></ul> <footer class="svelte-1fanv0g"><!> <div class="summary svelte-1fanv0g"><p class="summary--label svelte-1fanv0g">Total</p> <p class="summary--amount svelte-1fanv0g"> </p></div> <div class="buttonRow svelte-1fanv0g"><!> <!> <!></div></footer></div>'),H0=w('<div class="order svelte-1fanv0g"><div class="panel svelte-1fanv0g"><div class="panel--header svelte-1fanv0g"><p class="svelte-1fanv0g">cantidad</p> <p class="svelte-1fanv0g">producto</p> <p class="svelte-1fanv0g">precio</p> <p class="svelte-1fanv0g">importe</p></div> <div><!></div></div></div>');function V0(p,e){$(e,!0);let a=P(()=>V.reduce((C,d)=>{const y=parseFloat(d.price),e2=parseFloat(d.quantity);return C+y*e2},0)),u=W(!1),v=W(0),s=P(()=>t(v)/100),o=P(()=>Math.round(t(a)*t(s)*100)/100),g=P(()=>t(a)-t(o)),c=W(!1),n=W(!1);function I(){m(n,!1),m(c,!1),m(u,!1),m(v,0),V.length=0}function A(){t(u)?(m(v,0),m(u,!1)):m(u,!0)}function L(C){const d=Number(t(v)),y=Math.max(0,Math.min(100,Math.floor(d)));m(v,K(y)),C.target.value=t(v)}function N(){if(t(c)){m(c,!1);return}t(n)?m(n,!1):m(n,!0)}async function _(){if(t(n)){m(n,!1);return}t(c)?(await q2(V,t(g),0,t(g),t(s),0,0)).status==200&&I():m(c,!0)}var f=H0(),B=i(f),j=r(i(B),2),M=i(j);{var R=C=>{var d=y0(),y=i(d);{var e2=b=>{p0(b,{get total(){return t(g)},get discountRate(){return t(s)},reset:I,get ready(){return t(n)},set ready(D){m(n,K(D))}})};c2(y,b=>{t(n)&&b(e2)})}var S=r(y,2);S.__click=I;var a2=i(S);O(a2,"src",Y2),l(S);var E=r(S,2);L2(E,21,()=>V,b=>b.id,(b,D)=>{x0(b,{get item(){return t(D)}})}),l(E);var l2=r(E,2),Q=i(l2);{var b2=b=>{var D=w0(),J=i(D),s2=r(i(J),2),_2=i(s2,!0);l(s2),l(J);var v2=r(J,2),X=r(i(v2),2),G=i(X);H2(G),G.__input=L,P2(2),l(X);var n2=r(X,2),g2=i(n2,!0);l(n2),l(v2),l(D),Z(o2=>{k(_2,t(a)),k(g2,o2)},[()=>t(o)%1!==0?t(o).toFixed(2):t(o)]),k2(G,()=>t(v),o2=>m(v,o2)),x(b,D)};c2(Q,b=>{t(u)&&b(b2)})}var U=r(Q,2),z=r(i(U),2),p2=i(z,!0);l(z),l(U);var i2=r(U,2),r2=i(i2);x2(r2,{readyImg:W2,readyAlt:"cancelar",imgSrc:t0,imgAlt:"efectivo",flexBasis:"50%",action:N,goback:"true",get ready(){return t(n)},set ready(b){m(n,K(b))}});var f2=r(r2,2);x2(f2,{readyImg:j2,readyAlt:"confirmar",imgSrc:$2,imgAlt:"tarjeta",flexBasis:"50%",action:_,get ready(){return t(c)},set ready(b){m(c,K(b))}});var m2=r(f2,2);x2(m2,{flexBasis:"15%",action:A,text:"%",get ready(){return t(u)}}),l(i2),l(l2),l(d),Z(b=>{d2(E,1,N2(["order--items",{discounted:t(u)}]),"svelte-1fanv0g"),k(p2,b)},[()=>t(g)%1!==0?t(g).toFixed(2):t(g)]),q(1,E,()=>F2),q(2,E,()=>y2),q(3,d,()=>y2,()=>({duration:200})),x(C,d)};c2(M,C=>{V.length>0&&C(R)})}l(j),l(B),l(f),Z(()=>d2(j,1,`panel--body ${(V.length<1?"empty":"")??""}`,"svelte-1fanv0g")),x(p,f),t2()}u2(["click","input"]);var k0=w('<div class="grid svelte-5wt3hs"><!> <!> <!></div>');function P0(p,e){$(e,!0);let{cats:a,products:u}=e.data,v=P(()=>u.filter(n=>n.catproduct_id===w2.cat));var s=k0(),o=i(s);E2(o,{cats:a});var g=r(o,2);G2(g,{get filteredProducts(){return t(v)}});var c=r(g,2);V0(c,{}),l(s),x(p,s),t2()}export{P0 as component};
